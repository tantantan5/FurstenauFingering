<!DOCTYPE html>

<html>

<head>
<style>
h1 {
  grid-area: header;
  background-color: skyblue;
  text-align: center;
  color: #ffffff;
  font-size: 450%;
}

form,input,button {
  text-align: center;
  font-size: 150%;
}

ul {
  font-size: 220%
}
</style>
</head>

<body>

<h1>FÃ¼rstenau Fingering</h1>
<form data-fingeringfinder-form>
  <input name="search" type="text" placeholder="ex. 1,10,49a" />
  <button type="submit">Search</button>
</form>
<ul data-fingerings></ul>

<script>
var request = new XMLHttpRequest();

request.open("GET", "https://tantantan5.github.io/FurstenauFingering/F%C3%BCrstenauFingering.json");
request.responseType = 'json';
request.send();
request.onload = function () {
  fingerings = request.response;
};

document
  .querySelector("[data-fingeringfinder-form]")
  .addEventListener("submit", (e) => {
    e.preventDefault();
    renderBooks(generateBookHTML(booksFilter(e.target.search.value)));
  });

function booksFilter(targetBook, allBooks = fingerings) {
  return allBooks.filter((book) => {
    const inputNumbers = targetBook.split(",");
    return inputNumbers.includes(book.Number);
  });
}

function renderBooks(targetHTML) {
  const bookList = document.querySelector("[data-fingerings]");
  bookList.innerHTML = targetHTML;
}

function generateBookHTML(targetBooks) {
  return targetBooks
    .map((book) => {
      return `<li class="bookList__item">${book.Number} - <span class="bookList__author">${book.Fingering}</span></li>`;
    })
    .join("");
}

</script>


</body>

</html>